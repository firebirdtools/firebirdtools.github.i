<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CppLogging::RollingFileAppender class | CppLogging docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+doxygen.compiled.css" />
  <link rel="icon" href="firebird.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://github.com/firebirdtools/CppLogging/">CppLogging</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">docs</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li>
              <a href="doc-help.html">Doc help</a>
              <ol>
                <li><a href="git-help.html">Git help</a></li>
                <li><a href="mcss-help.html">Mcss help</a></li>
                <li><a href="cmake-help.html">cmake help</a></li>
                <li><a href="electron-help.html">Electron help</a></li>
              </ol>
            </li>
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceCppLogging.html">CppLogging</a>::<wbr/></span>RollingFileAppender <span class="m-thin">class</span>
        </h1>
        <p>Rolling file appender.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Rolling file appender writes the given logging record into the file and performs file rolling operation depends on the given policy. In case of any IO error this appender will lost the logging record, but try to recover from fail in a short interval of 100ms.</p><p>Time-based rolling policy will create a new logging file to write into using a special pattern (contains date &amp; time placeholders).</p><p>Size-based rolling policy will create a new logging file to write when the current file size exceeded size limit. Logging backups are indexed and its count could be limited as well.</p><p>It is possible to enable archivation of the logging backups in a background thread.</p><p>Not thread-safe.</p>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-dox">
            <dt>
              class <a href="classCppLogging_1_1Appender.html" class="m-dox">Appender</a>
            </dt>
            <dd>Logging appender interface.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper"><a href="#a8227d016c9848a0b5c224df131063d64" class="m-dox">RollingFileAppender</a>(</span><span class="m-dox-wrap">const CppCommon::Path&amp; path,
              <a href="namespaceCppLogging.html#a2ae7ad16f5b402d86a07604253464f57" class="m-dox">TimeRollingPolicy</a> policy = <a href="namespaceCppLogging.html#a2ae7ad16f5b402d86a07604253464f57a5b1d59b5451c06afb65ab1bc2713cfb4" class="m-dox">TimeRollingPolicy::<wbr />DAY</a>,
              const std::string&amp; pattern = &quot;{UtcDateTime}.log&quot;,
              bool archive = false,
              bool truncate = false,
              bool auto_flush = false) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Initialize the rolling file appender with a time-based policy.</dd>
            <dt>
              <span class="m-dox-wrap-bumper"><a href="#aec5894fa4d8f2f9e11ade7e3285e5eef" class="m-dox">RollingFileAppender</a>(</span><span class="m-dox-wrap">const CppCommon::Path&amp; path,
              const std::string&amp; filename,
              const std::string&amp; extension,
              size_t size = 104857600,
              size_t backups = 10,
              bool archive = false,
              bool truncate = false,
              bool auto_flush = false) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Initialize the rolling file appender with a size-based policy.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a5d4b2e45b751819063a6e9c5edd81bbf" class="m-dox">AppendRecord</a>(</span><span class="m-dox-wrap"><a href="classCppLogging_1_1Record.html" class="m-dox">Record</a>&amp; record) override <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Append the given logging record.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#abe1e794f13149844125945f1a7c2325d" class="m-dox-self" name="abe1e794f13149844125945f1a7c2325d">Flush</a>(</span><span class="m-dox-wrap">) override <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Flush the logging appender.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a083dbba2f296cc6d4a36c1c85c62ff76" class="m-dox">onArchiveThreadInitialize</a>(</span><span class="m-dox-wrap">) <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Initialize archivation thread handler.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ae4ed2ebcd718524d3df9b3c56766bc35" class="m-dox">onArchiveThreadCleanup</a>(</span><span class="m-dox-wrap">) <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Cleanup archivation thread handler.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-dox-details" id="a8227d016c9848a0b5c224df131063d64"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> CppLogging::<wbr />RollingFileAppender::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a8227d016c9848a0b5c224df131063d64" class="m-dox-self">RollingFileAppender</a>(</span><span class="m-dox-wrap">const CppCommon::Path&amp; path,
              <a href="namespaceCppLogging.html#a2ae7ad16f5b402d86a07604253464f57" class="m-dox">TimeRollingPolicy</a> policy = <a href="namespaceCppLogging.html#a2ae7ad16f5b402d86a07604253464f57a5b1d59b5451c06afb65ab1bc2713cfb4" class="m-dox">TimeRollingPolicy::<wbr />DAY</a>,
              const std::string&amp; pattern = &quot;{UtcDateTime}.log&quot;,
              bool archive = false,
              bool truncate = false,
              bool auto_flush = false) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Initialize the rolling file appender with a time-based policy.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">path</td>
                  <td>- Logging path</td>
                </tr>
                <tr>
                  <td>policy</td>
                  <td>- Time-based rolling policy (default is <a href="namespaceCppLogging.html#a2ae7ad16f5b402d86a07604253464f57a5b1d59b5451c06afb65ab1bc2713cfb4" class="m-dox">TimeRollingPolicy::<wbr />DAY</a>)</td>
                </tr>
                <tr>
                  <td>pattern</td>
                  <td>- Logging pattern (default is &quot;{UtcDateTime}.log&quot;)</td>
                </tr>
                <tr>
                  <td>archive</td>
                  <td>- Archivation flag (default is false)</td>
                </tr>
                <tr>
                  <td>truncate</td>
                  <td>- Truncate flag (default is false)</td>
                </tr>
                <tr>
                  <td>auto_flush</td>
                  <td>- Auto-flush flag (default is false)</td>
                </tr>
              </tbody>
            </table>
<p>Time-based policy composes logging filename from the given pattern using the following placeholders:</p><ul><li>{UtcDateTime} / {LocalDateTime} - converted to the UTC/local date &amp; time (e.g. &quot;1997-07-16T192030Z&quot; / &quot;1997-07-16T192030+0100&quot;)</li><li>{UtcDate} / {LocalDate} - converted to the UTC/local date (e.g. &quot;1997-07-16&quot;)</li><li>{Time} / {LocalTime} - converted to the UTC/local time (e.g. &quot;192030Z&quot; / &quot;192030+0100&quot;)</li><li>{UtcYear} / {LocalYear} - converted to the UTC/local four-digits year (e.g. &quot;1997&quot;)</li><li>{UtcMonth} / {LocalMonth} - converted to the UTC/local two-digits month (e.g. &quot;07&quot;)</li><li>{UtcDay} / {LocalDay} - converted to the UTC/local two-digits day (e.g. &quot;16&quot;)</li><li>{UtcHour} / {LocalHour} - converted to the UTC/local two-digits hour (e.g. &quot;19&quot;)</li><li>{UtcMinute} / {LocalMinute} - converted to the UTC/local two-digits minute (e.g. &quot;20&quot;)</li><li>{UtcSecond} / {LocalSecond} - converted to the UTC/local two-digits second (e.g. &quot;30&quot;)</li><li>{UtcTimezone} / {LocalTimezone} - converted to the UTC/local timezone suffix (e.g. &quot;Z&quot; / &quot;+0100&quot;)</li></ul>
          </div></section>
          <section class="m-dox-details" id="aec5894fa4d8f2f9e11ade7e3285e5eef"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> CppLogging::<wbr />RollingFileAppender::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#aec5894fa4d8f2f9e11ade7e3285e5eef" class="m-dox-self">RollingFileAppender</a>(</span><span class="m-dox-wrap">const CppCommon::Path&amp; path,
              const std::string&amp; filename,
              const std::string&amp; extension,
              size_t size = 104857600,
              size_t backups = 10,
              bool archive = false,
              bool truncate = false,
              bool auto_flush = false) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Initialize the rolling file appender with a size-based policy.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">path</td>
                  <td>- Logging path</td>
                </tr>
                <tr>
                  <td>filename</td>
                  <td>- Logging filename</td>
                </tr>
                <tr>
                  <td>extension</td>
                  <td>- Logging extension</td>
                </tr>
                <tr>
                  <td>size</td>
                  <td>- Rolling size limit in bytes (default is 100 megabytes)</td>
                </tr>
                <tr>
                  <td>backups</td>
                  <td>- Rolling backups count (default is 10)</td>
                </tr>
                <tr>
                  <td>archive</td>
                  <td>- Archivation flag (default is false)</td>
                </tr>
                <tr>
                  <td>truncate</td>
                  <td>- Truncate flag (default is false)</td>
                </tr>
                <tr>
                  <td>auto_flush</td>
                  <td>- Auto-flush flag (default is false)</td>
                </tr>
              </tbody>
            </table>
<p>Size-based policy for 5 backups works in a following way:</p><p>example.log -&gt; example.1.log example.1.log -&gt; example.2.log example.2.log -&gt; example.3.log example.3.log -&gt; example.4.log example.4.log -&gt; example.5.log example.5.log -&gt; remove</p>
          </div></section>
          <section class="m-dox-details" id="a5d4b2e45b751819063a6e9c5edd81bbf"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void CppLogging::<wbr />RollingFileAppender::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a5d4b2e45b751819063a6e9c5edd81bbf" class="m-dox-self">AppendRecord</a>(</span><span class="m-dox-wrap"><a href="classCppLogging_1_1Record.html" class="m-dox">Record</a>&amp; record) override <span class="m-label m-warning">virtual</span></span></span>
            </h3>
            <p>Append the given logging record.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">record</td>
                  <td>- Logging record</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a083dbba2f296cc6d4a36c1c85c62ff76"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void CppLogging::<wbr />RollingFileAppender::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a083dbba2f296cc6d4a36c1c85c62ff76" class="m-dox-self">onArchiveThreadInitialize</a>(</span><span class="m-dox-wrap">) <span class="m-label m-warning">virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Initialize archivation thread handler.</p>
<p>This handler can be used to initialize priority or affinity of the archivation thread.</p>
          </div></section>
          <section class="m-dox-details" id="ae4ed2ebcd718524d3df9b3c56766bc35"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void CppLogging::<wbr />RollingFileAppender::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ae4ed2ebcd718524d3df9b3c56766bc35" class="m-dox-self">onArchiveThreadCleanup</a>(</span><span class="m-dox-wrap">) <span class="m-label m-warning">virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Cleanup archivation thread handler.</p>
<p>This handler can be used to cleanup priority or affinity of the archivation thread.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages. You can omit any prefix from the symbol or file path; adding a <code>:</code> or <code>/</code> suffix lists all members of given symbol or directory. Navigate through the list using <span class="m-label m-dim">&darr;</span> and <span class="m-label m-dim">&uarr;</span>, press <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script>
  Search.download(window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/') + 1) + "searchdata.bin");
</script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>CppLogging docs. Part of the <a href="https://github.com/firebirdtools/CppLogging/">CppLogging project</a>.<br />Generated by <a href="http://doxygen.org/">Doxygen</a> 1.8.15.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>